---
description: Recharts data visualization patterns for Next.js
globs: src/components/charts/**/*.tsx, app/**/*.tsx
alwaysApply: false
---
# Recharts Visualization Rules (Next.js)

## Chart Component Structure
- **Client Only:** Recharts components interact with the DOM. **Must use `'use client'`** at the top of the file.
- Place chart components in `src/components/charts/`.
- Use `ResponsiveContainer` for responsive sizing.

## Data Preparation
- Fetch data in Server Components.
- Pass data as props to the Client Component chart.
- Type data structures with TypeScript.

## Chart Configuration
- Define colors/themes as constants.
- Use `dataKey` matching prop structure.
- Handle hydration issues (Recharts relies on window/DOM, so ensure it renders only on client or handle mount check if using strict hydration).

## Performance
- Memoize chart components with `React.memo`.
- Use `isAnimationActive={false}` for large datasets or if hydration mismatch occurs.

## Best Practices
- **Isolation:** Keep the heavy chart library in a separate Client Component leaf to allow the parent to remain a Server Component.
- **Dynamic Import:** Consider `next/dynamic` with `{ ssr: false }` if chart libraries cause large bundle sizes or SSR issues.

## Examples
<example>
// app/components/charts/RevenueChart.tsx
'use client'; // Required for Recharts

import { LineChart, Line, ResponsiveContainer, XAxis, YAxis, Tooltip } from 'recharts';
import { memo } from 'react';

interface RevenueChartProps {
  data: { month: string; revenue: number }[];
}

export const RevenueChart = memo(({ data }: RevenueChartProps) => {
  return (
    <ResponsiveContainer width="100%" height={300}>
      <LineChart data={data}>
        <XAxis dataKey="month" />
        <YAxis />
        <Tooltip />
        <Line type="monotone" dataKey="revenue" stroke="#8884d8" />
      </LineChart>
    </ResponsiveContainer>
  );
});
</example>
